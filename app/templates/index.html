<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Filings Database</title>
</head>
<body>
    <h1>Summary Database</h1>
    <a href="/companies">Go to Companies Page</a>

    <form method="get" action="/">
        <label for="company_name">Filter by Company:</label>
        <select name="company_name" id="company_name">
            <option value="">All Companies</option>
            {% for name in company_names %}
                <option value="{{ name['company_name'] }}" {% if name['company_name'] == request.args.get('company_name') %} selected {% endif %}>{{ name['company_name'] }}</option>
            {% endfor %}
        </select>

        <label for="form">Filter by Form:</label>
        <select name="form" id="form">
            <option value="">All Forms</option>
            {% for form in forms %}
                <option value="{{ form['form'] }}" {% if form['form'] == request.args.get('form') %} selected {% endif %}>{{ form['form'] }}</option>
            {% endfor %}
        </select>

        <label for="assigned_to">Filter by Assigned To:</label>
        <select name="assigned_to" id="assigned_to">
            <option value="">All</option>
            {% for name in assigned_tos %}
                <option value="{{ name['assigned_to'] }}" {% if name['assigned_to'] == request.args.get('assigned_to') %} selected {% endif %}>{{ name['assigned_to'] }}</option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <table border="1">
        <tr>
            <th>ID</th>
            <th>Date</th>
            <th>Company Name</th>
            <th>Form</th>
            <th>Link</th>
            <th>Summary</th>
            <th>Assigned To</th>
        </tr>
        {% for summary in summaries %}
        <tr>
            <td>{{ summary['id'] }}</td>
            <td>{{ summary['date'] }}</td>
            <td>{{ summary['company_name'] }}</td>
            <td>{{ summary['form'] }}</td>
            <td><a href="{{ summary['link'] }}">Link</a></td>
            <td>{{ summary['summary'] }}</td>
            <td>{{ summary['assigned_to'] }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
